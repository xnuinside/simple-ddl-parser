[tox]
envlist = py39, py310, py311, py312, py313, lint
isolated_build = True

[testenv]
# Ensure we test the installed package, not source code
package = wheel
usedevelop = false
deps =
    pytest>=7.0
# Change to tests directory to ensure imports come from installed package
changedir = {toxinidir}/tests
commands =
    pytest . {posargs}

[testenv:lint]
basepython = python3.9
skip_install = true
changedir = {toxinidir}
deps =
    black>=24,<26
    ruff>=0.6.9
commands =
    black --exclude "(/\\.tox/|/\\.venv/|simple_ddl_parser/parsetab\\.py)" .
    ruff check --exclude .tox --exclude .venv --exclude simple_ddl_parser/parsetab.py .
